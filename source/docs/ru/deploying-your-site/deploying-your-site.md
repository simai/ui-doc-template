---
extends: _core._layouts.documentation
section: content
title: 'Развертывание сайта'
description: 'Развертывание сайта'
---

# Развертывание сайта

Поскольку сайты Jigsaw представляют собой просто статический HTML и Javascript, они просты и дешевы в развертывании и размещении.

## Использование GitHub Pages

GitHub Pages — это бесплатный сервис для размещения статических сайтов, предлагаемый GitHub. Чтобы начать работу, сначала прочитайте файл
Документация для понимания того, как работает сервис.

Подход, который мы используем в Tighten для развертывания сайтов Jigsaw на страницах GitHub, выглядит следующим образом:

1. Создайте свой сайт для продакшена
    ```bash 
    npm run build
    ```
2. Зафиксируйте файл `build_production` в репозиторий
    ```bash 
    git add build_production && git commit -m "Build for deploy"
    ```
3. Использование `git subtree push` чтобы нажать только на кнопку `build_production` в вашу папку `gh-pages` ветка
   ```bash 
   git subtree push --prefix build_production origin gh-pages
   ```

## Использование Netlify
Netlify — это сервис, который предоставляет бесплатный хостинг статического сайта и непрерывное развертывание, которое можно настроить для воспроизведения
Хорошо работает с любым генератором статических сайтов.

Чтобы развернуть сайт в Netlify, сначала создайте файл `netlify.toml` файл со следующей конфигурацией:
```toml 
[build]
command = "npm run build"
publish = "build_production"
```
Отправьте этот файл в репозиторий.

Затем подключите репозиторий к приложению Netlify, чтобы настроить непрерывное развертывание.

Вы можете пропустить настройки сборки и развертывания, потому что Netlify прочитает `netlify.toml` файл, который мы создали ранее.

## Использование Amazon S3
Amazon S3 — это очень доступный сервис для размещения статических активов. Возможно, вы уже использовали его в прошлом для хостинга
Например, изображения, пользовательские загрузки или PDF-файлы в ваших веб-приложениях.

Вы, возможно, не знали, что Amazon S3 также имеет первоклассную поддержку хостинга статических сайтов, таких как ваш пазл
проекты.

Чтобы развернуть сайт в S3, сначала создайте сайт для рабочей среды:
```bash 
npm run build
```
Затем просто следуйте инструкциям в документации по статическому сайту Amazon, чтобы развернуть свой `build_production` на ваш S3
ведро.

## Использование хостинга приложений Kinsta
Kinsta Application Hosting — это доступный, ориентированный на разработчиков облачный хостинг, который позволяет развертывать и размещать ваш веб-сайт.

Перед развертыванием сайта необходимо внести некоторые незначительные изменения — установить `serve` запустив `npm install serve`, а затем обновить
твой `package.json` файл:
```json
"scripts": {
"build": "composer install && npm run build",
"start": "serve ./build_production"
},
```
Это приведет к сборке вашего сайта и запуску сервера автоматически.

Наконец, добавьте пакеты сборки PHP и NodeJS в раздел «Процессы» панели управления Kinsta.

## Вручную
Если у вас уже есть сервер, который вы хотели бы использовать для размещения вашего сайта Jigsaw, все, что вам нужно сделать, это получить содержимое
`build_production` в общедоступную папку, на которую указывает URL-адрес, который вы хотите использовать.

## Изменение исходного и конечного каталогов
Jigsaw будет искать ваши исходные файлы в `source` и выведет ваши файлы в каталог с именем `build_`
за которым следует среда, указанная в поле `build` команда (`build_local` по умолчанию, или `build_staging`,
`build_production`и т.д.). Тем не менее, вы можете настроить эти местоположения, добавив параметр `build` ключ к массиву в `config.php`,
и указание собственных путей к источнику и/или назначению.

> config.php
```php
<?php

return [
    'build' => [
        'source' => 'src',
        'destination' => 'my_destination',
    ],
    // ...
];
 ```
Исходный и конечный пути относятся к корневому каталогу проекта, т.е. к месту, где ваш `config.php` файл.

> config.php
```php
<?php

return [
    'build' => [
        'destination' => '../build-one-level-up',
    ],
    // ...
];
```
Чтобы включить имя среды в путь назначения, используйте метод `{env}` Токен в вашем имени пути. `{env}` будет заменено окружением, указанным при запуске команды `build` и по умолчанию имеет значение `local`.

> config.php
```php
<?php

return [
    'build' => [
        'destination' => 'dist/{env}/public',
    ],
    // ...
];
```

В этом примере запуск `NODE_ENV=staging npm run build` будет выводить собранные файлы в `dist/staging/public`. Jigsaw создаст любые директории, которые еще не существуют.

Вы также можете назначить разные пути к источнику и сборке для разных сред с помощью нескольких файлов конфигурации, специфичных для среды.

Пути к источнику и назначению в `config.production.php`, например, будет объединен с любыми путями сборки, которые были определены в `config.php` При беге `npm run build`.
