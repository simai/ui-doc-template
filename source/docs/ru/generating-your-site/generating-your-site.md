---
extends: _core._layouts.documentation
section: content
title: 'Создание вашего сайта'
description: 'Создание вашего сайта'
---

# Создание вашего сайта

## Сборка для рабочей среды
Чтобы создать статический сайт для развертывания, выполните следующую команду:
```bash
npm run build
```

Вы увидите результат, подобный этому:

```bash
> build
> vite build

vite v6.3.5 building for production...
✓ 2 modules transformed.
source/assets/build/manifest.json            0.30 kB │ gzip: 0.15 kB
source/assets/build/assets/main-La0jHWj3.css 5.18 kB │ gzip: 1.52 kB
source/assets/build/assets/main-ByIq-FUT.js  0.03 kB │ gzip: 0.05 kB
✓ built in 503ms

Build time: 0.03 seconds
Site built successfully!
```
Ваш полный статический сайт будет сгенерирован в каталоге /build_production и готов к развертыванию.

Как видно из вывода, Vite компилирует, минимизирует и оптимизирует ваши ресурсы. Этот процесс включает в себя объединение, в котором Vite объединяет несколько файлов JavaScript и CSS в меньшее количество оптимизированных.

Ссылки на связанные с ними ресурсы содержатся в созданных HTML-файлах следующим образом:
```
<link rel="stylesheet" href="/assets/build/assets/main-La0jHWj3.css">
<script defer type="module" src="/assets/build/assets/main-ByIq-FUT.js"></script>
```
Ресурсы, которые не требуют компиляции (например, изображения, шрифты), просто копируются из вашего каталога source/assets в эквивалентный путь к ресурсам в /build_production. Например, изображение, находящееся в source/assets/img/1.png, будет скопировано в /build_production/assets/img/1.png.

Это означает, что пути, которые вы используете в исходных файлах для этих ресурсов, остаются неизменными:
```
<img src="/assets/img/1.png">
```
## Средах
Часто может потребоваться использовать различные переменные сайта в среде разработки и рабочей среде. Например, в рабочей среде может потребоваться отобразить фрагмент трекинга Google Analytics, но не включать его в процесс разработки, чтобы не исказить результаты.

Jigsaw упрощает эту задачу, позволяя создавать дополнительные файлы config.php для различных сред.

Допустим, ваш файл base config.php выглядит следующим образом:
```php
<?php

return [
    'debug' => true,
    'company' => 'Tighten',
];
```

Вы можете переопределить параметр `staging` в производственной среде, создав новый файл с именем `config.production.php`:
```php
<?php

return [
    'debug' => false,
];
```
Этот файл объединен поверх `config.php`, поэтому вам нужно указать только переменные, которые вы изменяете.

Примечание: Переменные из конфигурационных файлов, специфичных для среды, не объединяются рекурсивно; Для слияния учитываются только ключи верхнего уровня. Для коллекций это поведение можно переопределить, установив параметр `merge_collection_configs` к истине в вашем основном `config.php` файл. Это особенно полезно, если вы используете фильтрацию коллекций для отключения некоторых элементов коллекции, таких как черновики записей блога, в определенных средах.

## Сборка для определенной среды

Чтобы собрать файлы для определенной среды, установите переменную NODE_ENV при выполнении команды build:

```
NODE_ENV=staging npm run build
```
При этом сайт будет выведен в новую папку с именем build_staging, а другие каталоги сборки (build_local, build_production) останутся нетронутыми.

Если вы не используете Vite для компиляции ресурсов, вы можете запустить команду сборки Jigsaw напрямую и передать имя среды:
```bash
vendor/bin/jigsaw build staging
```
